<template>
  <div id="mapContainer"></div>
</template>

<script>
import "leaflet/dist/leaflet.css";
import L from "leaflet";

export default {
  data() {
    return {
      map: null,
    };
  },
  mounted() {
    this.map = L.map("mapContainer").setView([20.5362, 105.9851], 11);
    L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png", {
      attribution:
        '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
    }).addTo(this.map);
    L.marker([20.5362, 105.9851], []).addTo(this.map);
    // zoom the map to the polyline
    //use a mix of renderers
    // create a red polyline from an array of LatLng points
    var latlngs =[
    [
        20.4403431,
        105.9815406
    ],
    [
        20.4392465,
        105.9816952
    ],
    [
        20.4380576,
        105.9817744
    ],
    [
        20.4358849,
        105.9819128
    ],
    [
        20.4340802,
        105.9821838
    ],
    [
        20.4327672,
        105.9824797
    ],
    [
        20.4319047,
        105.9828221
    ],
    [
        20.4315552,
        105.9830155
    ],
    [
        20.4314724,
        105.9831671
    ],
    [
        20.4314699,
        105.9836017
    ],
    [
        20.4316085,
        105.9844721
    ],
    [
        20.4318082,
        105.9853863
    ],
    [
        20.4318068,
        105.9856472
    ],
    [
        20.431703,
        105.9858639
    ],
    [
        20.4315385,
        105.9859716
    ],
    [
        20.4312308,
        105.9860348
    ],
    [
        20.4294064,
        105.9861971
    ],
    [
        20.4294057,
        105.9863056
    ],
    [
        20.4294227,
        105.9869145
    ],
    [
        20.4296639,
        105.987742
    ],
    [
        20.4296827,
        105.9880246
    ],
    [
        20.4296809,
        105.9883506
    ],
    [
        20.4292297,
        105.9884348
    ],
    [
        20.4294858,
        105.9937255
    ],
    [
        20.4281344,
        105.993975
    ],
    [
        20.4283125,
        105.9946516
    ],
    [
        20.4270291,
        105.9946451
    ],
    [
        20.4264209,
        105.9944511
    ],
    [
        20.426081,
        105.9943538
    ],
    [
        20.4259204,
        105.9942387
    ],
    [
        20.4257959,
        105.9940668
    ],
    [
        20.4257791,
        105.9938576
    ],
    [
        20.4255423,
        105.9932262
    ],
    [
        20.4253458,
        105.993092
    ],
    [
        20.4246502,
        105.9929576
    ],
    [
        20.424053,
        105.9927421
    ],
    [
        20.4232448,
        105.9924877
    ],
    [
        20.4217458,
        105.9919921
    ],
    [
        20.4206328,
        105.991686
    ],
    [
        20.4196021,
        105.9913555
    ],
    [
        20.418747,
        105.9910883
    ],
    [
        20.4182082,
        105.9909228
    ],
    [
        20.4177143,
        105.9908591
    ],
    [
        20.4160841,
        105.9907917
    ],
    [
        20.4146677,
        105.9908965
    ],
    [
        20.413861,
        105.9909484
    ],
    [
        20.4134301,
        105.9910977
    ],
    [
        20.4130524,
        105.9913614
    ],
    [
        20.4128371,
        105.991398
    ],
    [
        20.4118313,
        105.9914872
    ],
    [
        20.410809,
        105.9915377
    ],
    [
        20.4106301,
        105.9914605
    ],
    [
        20.4105057,
        105.9912696
    ],
    [
        20.4104719,
        105.9909083
    ],
    [
        20.4104209,
        105.9896716
    ],
    [
        20.4093453,
        105.9897655
    ],
    [
        20.4078006,
        105.9897365
    ],
    [
        20.4064908,
        105.9897391
    ],
    [
        20.4047885,
        105.9896586
    ],
    [
        20.4038824,
        105.9897628
    ],
    [
        20.403675,
        105.9897866
    ],
    [
        20.4034489,
        105.9914257
    ],
    [
        20.4033879,
        105.9919773
    ],
    [
        20.4033706,
        105.9924832
    ],
    [
        20.4028308,
        105.9925575
    ],
    [
        20.4023288,
        105.9927901
    ],
    [
        20.40166,
        105.9929823
    ],
    [
        20.4008989,
        105.9931151
    ],
    [
        20.4003219,
        105.9934651
    ],
    [
        20.399763,
        105.9939135
    ],
    [
        20.3995574,
        105.994207
    ],
    [
        20.3993882,
        105.994599
    ],
    [
        20.3993115,
        105.9950506
    ],
    [
        20.3991768,
        105.9958948
    ],
    [
        20.3981377,
        105.9959864
    ],
    [
        20.3979697,
        105.9961818
    ],
    [
        20.3978746,
        105.9965743
    ],
    [
        20.3978727,
        105.996928
    ],
    [
        20.397871,
        105.9972228
    ],
    [
        20.3978333,
        105.9973209
    ],
    [
        20.3977591,
        105.99734
    ],
    [
        20.3976478,
        105.9973393
    ],
    [
        20.3975553,
        105.9972993
    ],
    [
        20.3972245,
        105.9967666
    ],
    [
        20.3968187,
        105.9963709
    ],
    [
        20.3965233,
        105.9961529
    ],
    [
        20.3960604,
        105.9960319
    ],
    [
        20.395745,
        105.9960298
    ],
    [
        20.395578,
        105.9960484
    ],
    [
        20.3955401,
        105.9962054
    ],
    [
        20.3957366,
        105.9975038
    ],
    [
        20.3958951,
        105.9989789
    ],
    [
        20.3960206,
        105.9997266
    ],
    [
        20.396221,
        106.0003489
    ],
    [
        20.3993469,
        105.9989047
    ],
    [
        20.3998297,
        106.0004299
    ],
    [
        20.400192,
        106.0003212
    ],
    [
        20.400504,
        106.0014019
    ],
    [
        20.4006661,
        106.0018223
    ],
    [
        20.4007333,
        106.002061
    ],
    [
        20.4007694,
        106.0022997
    ],
    [
        20.4007252,
        106.0025228
    ],
    [
        20.4005917,
        106.0028387
    ],
    [
        20.4010809,
        106.0030595
    ],
    [
        20.4015594,
        106.0033729
    ],
    [
        20.4019342,
        106.0037401
    ],
    [
        20.4022567,
        106.0041626
    ],
    [
        20.4024399,
        106.0045506
    ],
    [
        20.4024923,
        106.0050162
    ],
    [
        20.4023948,
        106.0055335
    ],
    [
        20.4022209,
        106.0060326
    ],
    [
        20.4020206,
        106.0064796
    ],
    [
        20.4018876,
        106.0068038
    ],
    [
        20.4017282,
        106.0071563
    ],
    [
        20.4013387,
        106.0079804
    ],
    [
        20.4009312,
        106.0089047
    ],
    [
        20.4005589,
        106.0097719
    ],
    [
        20.4002733,
        106.0105202
    ],
    [
        20.4000244,
        106.0112546
    ],
    [
        20.3998192,
        106.0119889
    ],
    [
        20.3996142,
        106.0126757
    ],
    [
        20.3994714,
        106.0131909
    ],
    [
        20.3993729,
        106.0136106
    ],
    [
        20.399345,
        106.0139067
    ],
    [
        20.3993448,
        106.0139405
    ],
    [
        20.3993432,
        106.014203
    ],
    [
        20.3993771,
        106.0143848
    ],
    [
        20.3994374,
        106.0145477
    ],
    [
        20.3995685,
        106.0148045
    ],
    [
        20.3997487,
        106.015084
    ],
    [
        20.4000132,
        106.01547
    ],
    [
        20.4003135,
        106.0159623
    ],
    [
        20.4006013,
        106.0164943
    ],
    [
        20.4009134,
        106.0170263
    ],
    [
        20.4010813,
        106.0173455
    ],
    [
        20.4012732,
        106.0177046
    ],
    [
        20.4014893,
        106.0180704
    ],
    [
        20.4019431,
        106.0192396
    ],
    [
        20.4023854,
        106.0203426
    ],
    [
        20.4024561,
        106.0206742
    ],
    [
        20.4024778,
        106.0211117
    ],
    [
        20.4024469,
        106.0218735
    ],
    [
        20.4023685,
        106.0228404
    ],
    [
        20.4022924,
        106.0234229
    ],
    [
        20.4021804,
        106.0239521
    ],
    [
        20.4020675,
        106.0245876
    ],
    [
        20.4019903,
        106.0253688
    ],
    [
        20.4018881,
        106.026256
    ],
    [
        20.4017356,
        106.0274609
    ],
    [
        20.4016847,
        106.0278847
    ],
    [
        20.4017322,
        106.0280441
    ],
    [
        20.4017925,
        106.0280974
    ]
];

    var polyline = L.polyline(latlngs, { color: 'red' }).addTo(this.map);

    // zoom the map to the polyline
    this.map.fitBounds(polyline.getBounds());
    var customPane = this.map.createPane("customPane");
    customPane.style.zIndex = 399; // put just behind the standard overlay pane which is at 400
  },
  onBeforeUnmount() {
    if (this.map) {
      this.map.remove();
    }
  },
};
</script>